# Build Linux

* Get the code

```bash
git clone https://github.com/torvalds/linux.git
cd linux
git checkout v4.1.10
```

* According to your compiler

```bash
# Use the compiler generated by yourself
export CROSS_COMPILE=arm-cortex_a8-linux-gnueabihf-
# Use the compiler from other vendors
export CROSS_COMPILE=arm-none-linux-gnueabi-
# Use the compiler from Ubuntu
export CROSS_COMPILE=arm-linux-gnueabi-
```

* Build
  
```bash
make ARCH=arm distclean
make ARCH=arm vexpress_defconfig
# You can modify config by "make ARCH=arm menuconfig"
# 3
make ARCH=arm
# 4
make ARCH=arm modules
# 5: need mkimage (Able to get from tools folder in u-boot)
make ARCH=arm uImage LOADADDR=0x60000000
# 6
make ARCH=arm dtbs

# If you only want to test file system and kernel, use the following commands to replace 3-6
make ARCH=arm all
```

* Test with qemu
  - Should be panic since lack of file system

```bash
qemu-system-arm -M vexpress-a9 -m 512 -kernel arch/arm/boot/zImage -nographic -append "console=ttyAMA0" -dtb arch/arm/boot/dts/vexpress-v2p-ca9.dtb
```
